-- Generated by Oracle SQL Developer Data Modeler 21.1.0.092.1221
--   at:        2021-06-25 16:01:39 PKT
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE admin (
    first_name     VARCHAR2(50 CHAR) NOT NULL,
    last_name      VARCHAR2(50 CHAR) NOT NULL,
    age            INTEGER NOT NULL,
    phone_no       VARCHAR2(15 CHAR) NOT NULL,
    email          VARCHAR2(50 CHAR) NOT NULL,
    date_of_birth  DATE NOT NULL,
    username       VARCHAR2(50 CHAR) NOT NULL,
    password       VARCHAR2(50 CHAR) NOT NULL,
    gender         VARCHAR2(10 CHAR) NOT NULL
);

ALTER TABLE admin ADD CONSTRAINT admin_pk PRIMARY KEY ( username );

CREATE TABLE bakery_item (
    product_id  VARCHAR2(50 CHAR) NOT NULL,
    name        VARCHAR2(50 CHAR) NOT NULL,
    price       INTEGER NOT NULL,
    category    VARCHAR2(100 CHAR) NOT NULL,
    stock       INTEGER NOT NULL,
    expiry      DATE NOT NULL,
    img         VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE bakery_item ADD CONSTRAINT bakery_item_pk PRIMARY KEY ( product_id );

CREATE TABLE beverage (
    product_id  VARCHAR2(50 CHAR) NOT NULL,
    name        VARCHAR2(50 CHAR) NOT NULL,
    price       INTEGER NOT NULL,
    category    VARCHAR2(100 CHAR) NOT NULL,
    stock       INTEGER NOT NULL,
    expiry      DATE NOT NULL,
    img         VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE beverage ADD CONSTRAINT beverage_pk PRIMARY KEY ( product_id );

CREATE TABLE contains (
    orders_order_id     INTEGER NOT NULL,
    product_product_id  VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE contains ADD CONSTRAINT contains_pk PRIMARY KEY ( orders_order_id,
                                                              product_product_id );

CREATE TABLE customer (
    first_name     VARCHAR2(50 CHAR) NOT NULL,
    last_name      VARCHAR2(50 CHAR) NOT NULL,
    age            INTEGER NOT NULL,
    phone_no       VARCHAR2(15 CHAR) NOT NULL,
    email          VARCHAR2(50 CHAR) NOT NULL,
    date_of_birth  DATE NOT NULL,
    username       VARCHAR2(50 CHAR) NOT NULL,
    password       VARCHAR2(50 CHAR) NOT NULL,
    gender         VARCHAR2(10 CHAR) NOT NULL
);

ALTER TABLE customer ADD CONSTRAINT customer_pk PRIMARY KEY ( username );

CREATE TABLE customer_query (
    msg                VARCHAR2(1000 CHAR) NOT NULL,
    query_id           INTEGER NOT NULL,
    customer_username  VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE customer_query ADD CONSTRAINT customer_query_pk PRIMARY KEY ( query_id );

CREATE TABLE employee (
    first_name      VARCHAR2(50 CHAR) NOT NULL,
    last_name       VARCHAR2(50 CHAR) NOT NULL,
    age             INTEGER NOT NULL,
    phone_no        VARCHAR2(15 CHAR) NOT NULL,
    email           VARCHAR2(50 CHAR) NOT NULL,
    date_of_birth   DATE NOT NULL,
    username        VARCHAR2(50 CHAR) NOT NULL,
    password        VARCHAR2(50 CHAR) NOT NULL,
    admin_username  VARCHAR2(50 CHAR),
    gender          VARCHAR2(10 CHAR) NOT NULL
);

ALTER TABLE employee ADD CONSTRAINT employee_pk PRIMARY KEY ( username );

CREATE TABLE employee_query (
    msg                VARCHAR2(1000 CHAR) NOT NULL,
    query_id           INTEGER NOT NULL,
    employee_username  VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE employee_query ADD CONSTRAINT employee_query_pk PRIMARY KEY ( query_id );

CREATE TABLE fruit (
    product_id  VARCHAR2(50 CHAR) NOT NULL,
    name        VARCHAR2(50 CHAR) NOT NULL,
    price       INTEGER NOT NULL,
    category    VARCHAR2(100 CHAR) NOT NULL,
    stock       INTEGER NOT NULL,
    expiry      DATE NOT NULL,
    img         VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE fruit ADD CONSTRAINT fruit_pk PRIMARY KEY ( product_id );

CREATE TABLE orders (
    items              VARCHAR2(1000 CHAR) NOT NULL,
    total              NUMBER NOT NULL,
    status             CHAR(1) NOT NULL,
    order_id           INTEGER NOT NULL,
    customer_username  VARCHAR2(50 CHAR) NOT NULL,
    employee_username  VARCHAR2(50 CHAR)
);

ALTER TABLE orders ADD CONSTRAINT orders_pk PRIMARY KEY ( order_id );

CREATE TABLE product (
    product_id VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE product ADD CONSTRAINT product_pk PRIMARY KEY ( product_id );

CREATE TABLE snack (
    product_id  VARCHAR2(50 CHAR) NOT NULL,
    name        VARCHAR2(50 CHAR) NOT NULL,
    price       INTEGER NOT NULL,
    category    VARCHAR2(100 CHAR) NOT NULL,
    stock       INTEGER NOT NULL,
    expiry      DATE NOT NULL,
    img         VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE snack ADD CONSTRAINT snack_pk PRIMARY KEY ( product_id );

ALTER TABLE bakery_item
    ADD CONSTRAINT bakery_item_product_fk FOREIGN KEY ( product_id )
        REFERENCES product ( product_id )
            ON DELETE CASCADE;

ALTER TABLE beverage
    ADD CONSTRAINT beverage_product_fk FOREIGN KEY ( product_id )
        REFERENCES product ( product_id )
            ON DELETE CASCADE;

ALTER TABLE contains
    ADD CONSTRAINT contains_orders_fk FOREIGN KEY ( orders_order_id )
        REFERENCES orders ( order_id )
            ON DELETE CASCADE;

ALTER TABLE contains
    ADD CONSTRAINT contains_product_fk FOREIGN KEY ( product_product_id )
        REFERENCES product ( product_id )
            ON DELETE CASCADE;

ALTER TABLE customer_query
    ADD CONSTRAINT customer_query_customer_fk FOREIGN KEY ( customer_username )
        REFERENCES customer ( username )
            ON DELETE CASCADE;

ALTER TABLE employee
    ADD CONSTRAINT employee_admin_fk FOREIGN KEY ( admin_username )
        REFERENCES admin ( username )
            ON DELETE SET NULL;

ALTER TABLE employee_query
    ADD CONSTRAINT employee_query_employee_fk FOREIGN KEY ( employee_username )
        REFERENCES employee ( username )
            ON DELETE CASCADE;

ALTER TABLE fruit
    ADD CONSTRAINT fruit_product_fk FOREIGN KEY ( product_id )
        REFERENCES product ( product_id )
            ON DELETE CASCADE;

ALTER TABLE orders
    ADD CONSTRAINT orders_customer_fk FOREIGN KEY ( customer_username )
        REFERENCES customer ( username )
            ON DELETE CASCADE;

ALTER TABLE orders
    ADD CONSTRAINT orders_employee_fk FOREIGN KEY ( employee_username )
        REFERENCES employee ( username )
            ON DELETE SET NULL;

ALTER TABLE snack
    ADD CONSTRAINT snack_product_fk FOREIGN KEY ( product_id )
        REFERENCES product ( product_id )
            ON DELETE CASCADE;